<!DOCTYPE HTML>
<html>
<head>

<title>Accelerometer</title>
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
<!-- <link rel="stylesheet" href="font/ss-standard.css" /> -->
<link rel="stylesheet" href="style-1.css" />
<!-- <link rel="stylesheet" href="../gs.css" /> -->

<script src='jquery.js'></script>
<script src='javascript-1.js'></script>

<script>
  var errorCallback = function(e) {
    console.log('Permission Rejected', e);
  };
  navigator.getUserMedia({video: false, audio: true}, function(localMediaStream) {
    // var video = document.querySelector('video');
    // video.src = window.URL.createObjectURL(localMediaStream);
    // video.onloadedmetadata = function(e) {
    // };
		console.log(localMediaStream.active);
		alert(localMediaStream.active);
  }, errorCallback);
</script>

<script src="speech.1.0.0.js" type="text/javascript"></script>
<script type="text/javascript">
    var client;
    var request;

    function getMode() {
        return Microsoft.CognitiveServices.SpeechRecognition.SpeechRecognitionMode.shortPhrase;
    }

    function getKey() {
        return "c395ef2363b441d684dc9dccd4156f90";
    }

    function getLanguage() {
        return "en-us";
    }

    function clearText() {
        document.getElementById("output").value = "";
    }

    function setText(text) {
        document.getElementById("output").value += text;
    }

    function start() {
        var mode = getMode();

        clearText();

        client = Microsoft.CognitiveServices.SpeechRecognition.SpeechRecognitionServiceFactory.createMicrophoneClient(
            mode,
            getLanguage(),
            getKey());

        client.startMicAndRecognition();
        setTimeout(function () {
            client.endMicAndRecognition();
        }, 5000);

        client.onPartialResponseReceived = function (response) {
            setText(response);
        }

        client.onFinalResponseReceived = function (response) {
            setText(JSON.stringify(response));
        }
    }
</script>

</head>

<body>

<div id="container">

</div>

<div class='content tk-museo-sans'>
	<h1>Hey! This Only Works on Mobile Devices.</h1>
	<p>And you're not on a mobile device!</p>

</div>

<div class='footer'>
	<table>
		<tr>
			<th>X</th>
			<th>Y</th>
		</tr>
		<tr>
			<td id='X'>0</td>
			<td id='Y'>0</td>
		</tr>
	</table>
</div>
<table width="100%">
        <tr><td/><td><h1>Interact!</h1></td></tr>
        <tr>
            <td />
            <td><button onclick="start()">Listen</button></td>
        </tr>
        <tr><td/>
            <td>
                <textarea id="output" style='width:400px;height:200px'></textarea>
            </td>
        </tr>
    </table>
</body>
</html>
